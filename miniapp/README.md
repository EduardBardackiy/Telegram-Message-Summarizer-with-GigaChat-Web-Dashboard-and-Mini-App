!
# Telegram Mini App –¥–ª—è TGBot

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ Telegram —á–µ—Ä–µ–∑ Mini App API.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: –î–∞—à–±–æ—Ä–¥
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üí¨ –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö
- ‚è≥ –û–∂–∏–¥–∞—é—â–∏—Ö
- üìà –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- üïê –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∞–º–º–∞—Ä–∏–∑–∞—Ü–∏—è
- üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
- üìù –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (30 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
- ‚úì –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üïê –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- üî¢ ID —Å–æ–æ–±—â–µ–Ω–∏—è
- üìÑ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Mini App
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- üé® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ–º–∞ (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è) –∏–∑ Telegram
- ‚¨ÖÔ∏è –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- üîê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp API
- ‚ö° –†–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ Telegram –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```powershell
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
.\.venv\Scripts\Activate.ps1

# Flask —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∑–∞–ø—É—Å–∫–∞–µ–º Mini App
python miniapp/app.py
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ **–ø–æ—Ä—Ç—É 5001**: http://localhost:5001

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App

#### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å BotFather

–í Telegram –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ **@BotFather**

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Web App

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
/newapp
```

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (`@ED_Zerocoder_intensive_bot`)

#### –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

BotFather —Å–ø—Ä–æ—Å–∏—Ç:

1. **Title** (–Ω–∞–∑–≤–∞–Ω–∏–µ):
   ```
   TGBot Monitor
   ```

2. **Description** (–æ–ø–∏—Å–∞–Ω–∏–µ):
   ```
   –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã —Å–∞–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ Telegram-—Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.
   ```

3. **Photo** (—Ñ–æ—Ç–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É 640x640 px
   - –ò–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ (/empty)

4. **Demo GIF** (–∞–Ω–∏–º–∞—Ü–∏—è, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ: `/empty`

5. **Web App URL** (–≤–∞–∂–Ω–æ!):
   
   –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **ngrok** –∏–ª–∏ **Cloudflare Tunnel**:
   
   **–í–∞—Ä–∏–∞–Ω—Ç A: ngrok (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∞)**
   ```powershell
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: https://ngrok.com/download
   ngrok http 5001
   ```
   
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –≤–∏–¥–∞: `https://xxxx-xx-xxx-xxx-xxx.ngrok-free.app`
   
   **–í–∞—Ä–∏–∞–Ω—Ç B: Cloudflare Tunnel**
   ```powershell
   cloudflared tunnel --url http://localhost:5001
   ```
   
   **–í–∞—Ä–∏–∞–Ω—Ç C: –ü—Ä–æ–¥–∞–∫—à–µ–Ω (VPS/—Ö–æ—Å—Ç–∏–Ω–≥)**
   ```
   https://yourdomain.com
   ```

6. **Short name** (–∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è):
   ```
   tgbot_monitor
   ```
   
   ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≠—Ç–æ –∏–º—è –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ç–æ–º!

#### –®–∞–≥ 4: –ì–æ—Ç–æ–≤–æ!

BotFather —Å–æ–∑–¥–∞—Å—Ç —Å—Å—ã–ª–∫—É –≤–∏–¥–∞:
```
https://t.me/ED_Zerocoder_intensive_bot/tgbot_monitor
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –≤ Telegram
2. Mini App –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Telegram
3. –£–≤–∏–¥–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
4. –ú–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ø–∏—Å–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π

## üì± –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í –±–æ—Ç–µ

–î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App –≤ –≤–∞—à–µ–º –±–æ—Ç–µ:

```python
from telebot import types

keyboard = types.InlineKeyboardMarkup()
webapp = types.WebAppInfo(url="https://your-domain.com")
button = types.InlineKeyboardButton(text="üìä –û—Ç–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É", web_app=webapp)
keyboard.add(button)

bot.send_message(chat_id, "–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:", reply_markup=keyboard)
```

### –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞

–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π:
```
https://t.me/ED_Zerocoder_intensive_bot/tgbot_monitor
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç

–í `app.py` –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
app.run(debug=True, host="0.0.0.0", port=5001)  # –ó–∞–º–µ–Ω–∏—Ç–µ 5001
```

### –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

–í `app.py`, —Ñ—É–Ω–∫—Ü–∏—è `messages()`:
```python
per_page = 30  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–µ —á–∏—Å–ª–æ
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–í `templates/index.html` —É–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
```javascript
// –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
setInterval(() => {
    location.reload();
}, 30000);
```

## üåê –ü—É–±–ª–∏–∫–∞—Ü–∏—è (Production)

### –í–∞—Ä–∏–∞–Ω—Ç 1: VPS —Å –¥–æ–º–µ–Ω–æ–º

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Nginx –∫–∞–∫ reverse proxy
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL (Let's Encrypt)
4. URL –≤ BotFather: `https://yourdomain.com`

### –í–∞—Ä–∏–∞–Ω—Ç 2: Railway.app

```bash
railway login
railway init
railway up
```

URL –±—É–¥–µ—Ç –≤–∏–¥–∞: `https://your-app.up.railway.app`

### –í–∞—Ä–∏–∞–Ω—Ç 3: Render.com

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –Ω–∞ GitHub
2. –°–æ–∑–¥–∞–π—Ç–µ Web Service –Ω–∞ Render
3. –£–∫–∞–∂–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: `python miniapp/app.py`

### –í–∞—Ä–∏–∞–Ω—Ç 4: Heroku

```bash
heroku create your-miniapp
git push heroku main
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

–î–æ–±–∞–≤—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é Telegram init data:

```python
import hmac
import hashlib
from urllib.parse import parse_qs

def validate_telegram_data(init_data: str, bot_token: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—à—ë–ª –æ—Ç Telegram."""
    try:
        parsed = parse_qs(init_data)
        hash_value = parsed.get('hash', [''])[0]
        
        # –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        data_check = '\n'.join([
            f'{k}={v[0]}' for k, v in sorted(parsed.items())
            if k != 'hash'
        ])
        
        # –í—ã—á–∏—Å–ª—è–µ–º —Ö—ç—à
        secret_key = hmac.new(
            "WebAppData".encode(),
            bot_token.encode(),
            hashlib.sha256
        ).digest()
        
        calculated_hash = hmac.new(
            secret_key,
            data_check.encode(),
            hashlib.sha256
        ).hexdigest()
        
        return calculated_hash == hash_value
    except:
        return False
```

### CORS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```python
from flask_cors import CORS

CORS(app, origins=[
    "https://web.telegram.org",
    "https://telegram.org"
])
```

## üìä API Endpoints

### GET /
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–¥–∞—à–±–æ—Ä–¥)

### GET /messages?page=1
–°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

### GET /api/stats
JSON —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
```json
{
  "total": 100,
  "analyzed": 85,
  "unsummarized": 15,
  "last_summary": "2025-12-10T12:00:00",
  "percentage": 85.0
}
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –≤ BotFather –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ ngrok/tunnel —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è —Ç–µ—Å—Ç–∞

### –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∏–ª–∏ Telegram

Telegram WebApp SDK —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Telegram. –í –±—Ä–∞—É–∑–µ—Ä–µ –±—É–¥—É—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞.

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `messages.db` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (`../messages.db` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `miniapp/`).

### –û—à–∏–±–∫–∞ –ø–æ—Ä—Ç–∞ 5001 –∑–∞–Ω—è—Ç

```powershell
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 5001
Get-Process -Id (Get-NetTCPConnection -LocalPort 5001).OwningProcess | Stop-Process
```

## üìù TODO (–≤–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)

- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram init data
- [ ] Pull-to-refresh –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –°–∫–µ–ª–µ—Ç–æ–Ω—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- [ ] Offline mode —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ —Å –∏—Å—Ç–æ—Ä–∏–µ–π
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º
- [ ] –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ/—Å—Ç–∞—Ç—É—Å—É

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

Mini App –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Flask dashboard:
- **Flask Dashboard** - –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ (–ø–æ—Ä—Ç 5000)
- **Mini App** - –¥–ª—è Telegram (–ø–æ—Ä—Ç 5001)
- –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –ë–î (`messages.db`)

–ú–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Cursor (Claude Sonnet 4.5)  
**–î–∞—Ç–∞:** 10.12.2024  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram Mini Apps:** https://core.telegram.org/bots/webapps

